# 状态管理

在复杂的应用中，状态管理变得尤为重要。React 提供了几种不同的状态管理解决方案，包括但不限于：

### 一、Redux

Redux 是一个用于管理应用状态的库，常与 React 一起使用。
它通过一个全局的 store 来集中管理应用的状态。

#### 1、安装 Redux

```
npm install redux react-redux
```

#### 2、创建 Store

```
import { createStore } from 'redux';

const initialState = {
  counter: 0
};

const reducer = (state = initialState, action) => {
switch (action.type) {
  case 'INCREMENT':
    return { ...state, counter: state.counter + 1 };
  case 'DECREMENT':
    return { ...state, counter: state.counter - 1 };
  default:
    return state;
  }
}

const store = createStore(reducer)
```

#### 3、连接组件

```
import React from 'react';
import { useSelector, useDispatch } from 'react-redux';

function Counter() {
  const counter = useSelector(state => state.counter);
  const dispatch = useDispatch();

  return (
    <div>
      <p>Counter: {counter}</p>
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>Increment</button>
      <button onClick={() => dispatch({ type: 'DECREMENT' })}>Decrement</button>
    </div>
  )
}

export default Counter
```

### 二、Mobx

MobX 是一个简单、透明的状态管理库，它通过可观察对象和反应式视图来管理状态。

#### 1、安装 MobX

```
npm install mobx mobx-react
```

#### 2、创建 Store

```
import { makeAutoObservable } from 'mobx';

class CounterStore {
  counter = 0;

  constructor() {
    makeAutoObservable(this);
  }

  increment = () => {
    this.counter += 1;
  }

  decrement = () => {
    this.counter -= 1;
  }
}

const counterStore = new CounterStore()
```

#### 3、连接组件

```
import React from 'react';
import { observer } from 'mobx-react';
import { counterStore } from './stores/CounterStore';

const Counter = observer(() => {
  return (
    <div>
      <p>Counter: {counterStore.counter}</p>
      <button onClick={counterStore.increment}>Increment</button>
      <button onClick={counterStore.decrement}>Decrement</button>
    </div>
  )
})

export default Counter
```
  

### 三、React Context API

React 的 Context API 也可以用于状态管理，特别是在中小型应用中。
虽然它不如 Redux 和 MobX 强大，但对于简单的状态管理需求已经足够。

#### 1、创建 Context

```
import React, { createContext, useState } from 'react';

const CounterContext = createContext();

const CounterProvider = ({ children }) => {
  const [counter, setCounter] = useState(0);

  const increment = () => setCounter(counter + 1);
  const decrement = () => setCounter(counter - 1);

  return (
    <CounterContext.Provider value={{ counter, increment, decrement }}>
      {children}
    </CounterContext.Provider>
  )
}

export { CounterContext, CounterProvider }
```

#### 2、使用 Context

```
import React, { useContext } from 'react';
import { CounterContext } from './CounterContext';

const Counter = () => {
  const { counter, increment, decrement } = useContext(CounterContext);

  return (
    <div>
      <p>Counter: {counter}</p>
      <button onClick={increment}>Increment</button>
      <button onClick={decrement}>Decrement</button>
    </div>
  )
}

export default Counter
```