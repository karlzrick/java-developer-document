# 浏览器输入URL后究竟发生了什么？

- https://mp.weixin.qq.com/s/LCuu-CbgBGwxrKCRH1E58Q
- https://www.processon.com/view/62d7aff07d9c085ba143a04e

- ① 用户在地址栏输入内容，浏览器判断后生成相应的URL并传给网络进程。
- ② 网络进程先查询本地缓存，没有则解析URL并向DNS发送请求，得到IP。
- ③ 网络进程先与目标服务器进行TCP、TLS多次握手，建立TCP、TLS安全连接。
- ④ 紧接着组装请求报文，并由各个分层对数据进行封装，最终转为0、1格式。
- ⑤ 基于建立好的连接，利用物理介质传输数据，通过路由器控制数据的传输方向。
- ⑥ 请求会先去到CDN查询是否有缓存的内容，如果没有则继续向下请求。
- ⑦ 请求来到LVS后被转发到Nginx，再由Nginx转发到Gateway网关。
- ⑧ Gateway网关根据配置好的API分发规则，将请求分发到具体服务。
- ⑨ 紧接着再从Nacos注册中心内，查询出该服务的具体服务实例IP。
- ⑩ 请求来到具体的服务器后，先通过端口号找到具体的WEB服务进程Tomcat。
- ⑪ Tomcat基于SpringMVC的工作流程为请求定位到具体的Java后端方法。
- ⑫ 线程执行Java方法时，先去Redis中查询是否有数据，没有则查询MySQL。
- ⑬ 查询DB前先通过MyBatis生成SQL语句，然后再通过DB连接执行SQL。
- ⑭ 请求根据已配置的数据源地址，来到MySQL并执行SQL语句，从而获得数据。
- ⑮ 经过报文组装、数据封装、请求转发等操作，向客户端响应数据(原路返回)。
- ⑯ 应答报文经物理介质传输后，最终抵达客户端网络进程(可能会将数据加入缓存)。
- ⑰ 网络进程将数据交给浏览器之后，根据情况准备做TCP四次挥手，断开连接。
- ⑱ 浏览器创建渲染子进程，然后根据数据生成渲染树，最后绘制并显示页面。

